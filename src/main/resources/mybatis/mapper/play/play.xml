<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="test.arthall.play.map.PlayMap">

    <!-- 공연 정보 가져오기 -->
    <select id="getPlayList" parameterType="test.arthall.play.model.PlayDao" resultType="test.arthall.play.model.PlayDao">
        /* PlayMap.getPlayList */
        SELECT
                (
                 SELECT
                        COUNT(1)
                 FROM play )  AS TOTAL_CNT
                , NO
                , HALL_NAME
                , PLAY_TYPE
                , PLAY_NO
                , PLAY_SUB_TYPE
                , PLAY_NAME
                , SUB_TITLE
                , FR_DTTM
                , TO_DTTM
                , STARRING
                , CONTENT
                , RATING
                , RUNNING_TIME
                , INQUIRY
                , PRODUCER
                , BG_NUM
                , FILE_NAME
        FROM    play
        <if test='playName != null and playName != ""'>
            WHERE PLAY_NAME LIKE CONCAT('%', #{playName}, '%')
        </if>
    </select>
</mapper>